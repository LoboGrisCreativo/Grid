form_focus=function(){var n=$('input[type="text"]'),e=$(this).attr("placeholder");n.each(function(){var n=($('input[type="text"]'),$(this).attr("placeholder"));$(this).val().length>0||void 0!==n?$(this).siblings(".label-label").addClass("floating-label"):$(this).siblings(".label-label").removeClass("floating-label")}),n.on("change",function(){0!==$(this).val().length||void 0!==e?$(this).siblings(".label-label").addClass("floating-label"):$(this).siblings(".label-label").removeClass("floating-label")}),n.on("focusin",function(){$(this).val().length>=0||void 0!==e?$(this).siblings(".label-label").addClass("floating-label"):$(this).siblings(".label-label").removeClass("floating-label")}),n.on("focusout",function(){0!==$(this).val().length?$(this).siblings(".label-label").addClass("floating-label"):void 0!==$(this).attr("placeholder")?$(this).siblings(".label-label").addClass("floating-label"):$(this).siblings(".label-label").removeClass("floating-label")})},form_focus(),header=function(){header_scroll=function(){$(window).scroll(function(){var n=$(window).scrollTop();n<this.beforeTop?$("header").slideDown(300):$("header").slideUp(300),this.beforeTop=n})},activeMenu=function(){$("header li").on("click",function(){$("header li").removeClass("active"),$(this).addClass("active")})},header_dropdown=function(){$("header a").click(function(){$(this).siblings(".dropdownMenu").slideToggle(300)}).on("focusout",function(){$(this).siblings(".dropdownMenu").fadeOut(300)}),$(document).keyup(function(n){27===n.keyCode&&$(".enlaces a").siblings(".dropdownMenu").hide()})},header_scroll(),header_dropdown(),activeMenu()},header(),init=function(){dropdownMenu(".header__nav__menuHeader__listItem__enlace"),slideMenu("#btn-menu"),scrollToTop(".scrollTop"),activeMenu(".header__nav__menuHeader__listItem"),acordeon(".acordeon-title",".acordeon-paragraph"),llamadaAjax(".li-item"),pegamento(".contentfixed")},headerFixed=function(n){var e="header_fixed";$(window).on("scroll",function(){$(window).scrollTop()>30?$(n).addClass(e):$(n).removeClass(e)})},pegamento=function(n){$(window).scroll(function(){var e=$(window).scrollTop();e>30?$(n).addClass("fixed"):$(n).removeClass("fixed")})},seguimiento=function(n,e){$(n).on("scrollSpy:enter",function(){var n="#"+$(this).attr("id");$(e).each(function(){var t=$(this).children("a"),o=t.attr("href");n==o&&($(e).removeClass("active"),$(this).addClass("active"))})}),$(n).on("scrollSpy:exit",function(){var n="#"+$(this).attr("id");$(e).each(function(){var e=$(this).children("a"),t=e.attr("href");n==t&&$(this).removeClass("active")})}),$(n).scrollSpy()},dropdownMenu=function(n){$(".header__nav__menuHeader__listItem__enlace");$(n).click(function(){$(this).siblings(".dropdownMenu").slideToggle(300)}).on("focusout",function(){$(this).siblings(".dropdownMenu").fadeOut(300)})},slideMenu=function(n,e){$(n).on("click",function(n){var e=$(".enlaces");$("body");e.toggleClass("open")}),$(e).on("click",function(){var n=$("#btn-menu");n.removeClass("open"),$("body").css({"padding-left":"0",transition:"all 0.3s"}),$('<div class="overlay"></div>').detach()})},scrollToTop=function(n){$(window).on("scroll",function(){$(window).scrollTop()>80?$(n).slideDown():$(n).slideUp()}),$(n).click(function(){$("body").animate({scrollTop:0},400)})},activeMenu=function(n){$(n).on("click",function(){$(n).removeClass("active"),$(this).addClass("active")})},acordeon=function(n,e){$(n).click(function(){$(this).siblings(e).slideToggle(100),$(this).parent().siblings().find(e).slideUp(),$(this).children().toggleClass("fa-chevron-down fa-chevron-up"),$(this).parent().siblings().find("i").removeClass("fa-chevron-up").addClass("fa-chevron-down")})},llamadaAjax=function(n){$(n).on("click",function(n){var e=$(this).data("href");$.ajax({url:e+".html",async:!0,dataType:"html",success:function(n){$(".content_container").html(n)},error:function(n){$(".content_container").html("<h4>Lo sentimos, se produjo un error</h4>")}})})},$(document).ready(function(){init()}),function(n){n.fn.pluginName=function(e){var t={foo:"bar"},o={},i={init:function(e){return this.each(function(){o=n.extend({},t,e);n(this)})},foo_public_method:function(){}};return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void n.error('Method "'+e+'" does not exist in pluginName plugin!'):i.init.apply(this,arguments)}}(jQuery),function(n){function e(e,t,o,i){var l=n();return n.each(a,function(n,a){var s=a.offset().top,r=a.offset().left,c=r+a.width(),d=s+a.height(),u=!(r>t||c<i||s>o||d<e);u&&l.push(a)}),l}function t(){++c;var t=l.scrollTop(),o=l.scrollLeft(),i=o+l.width(),a=t+l.height(),r=e(t+d.top,i+d.right,a+d.bottom,o+d.left);n.each(r,function(n,e){var t=e.data("scrollSpy:ticks");"number"!=typeof t&&e.triggerHandler("scrollSpy:enter"),e.data("scrollSpy:ticks",c)}),n.each(s,function(n,e){var t=e.data("scrollSpy:ticks");"number"==typeof t&&t!==c&&(e.triggerHandler("scrollSpy:exit"),e.data("scrollSpy:ticks",null))}),s=r}function o(){l.trigger("scrollSpy:winSize")}function i(n,e,t){var o,i,l,a=null,s=0;t||(t={});var r=function(){s=t.leading===!1?0:u(),a=null,l=n.apply(o,i),o=i=null};return function(){var c=u();s||t.leading!==!1||(s=c);var d=e-(c-s);return o=this,i=arguments,d<=0?(clearTimeout(a),a=null,s=c,l=n.apply(o,i),o=i=null):a||t.trailing===!1||(a=setTimeout(r,d)),l}}var l=n(window),a=[],s=[],r=!1,c=0,d={top:0,right:0,bottom:0,left:0},u=Date.now||function(){return(new Date).getTime()};n.scrollSpy=function(e,o){e=n(e),e.each(function(e,t){a.push(n(t))}),o=o||{throttle:100},d.top=o.offsetTop||0,d.right=o.offsetRight||0,d.bottom=o.offsetBottom||0,d.left=o.offsetLeft||0;var s=i(t,o.throttle||100),c=function(){n(document).ready(s)};return r||(l.on("scroll",c),l.on("resize",c),r=!0),setTimeout(c,0),e},n.winSizeSpy=function(e){return n.winSizeSpy=function(){return l},e=e||{throttle:100},l.on("resize",i(o,e.throttle||100))},n.fn.scrollSpy=function(e){return n.scrollSpy(n(this),e)}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm1zLmpzIiwiaGVhZGVyLmpzIiwibWFpbi5qcyIsInBsYW50aWxsYV9wbHVnaW5fanF1ZXJ5LmpzIiwic2Nyb2xsc3B5LmpzIl0sIm5hbWVzIjpbImZvcm1fZm9jdXMiLCJpbnB1dCIsIiQiLCJwbGFjZWhvbGRlciIsInRoaXMiLCJhdHRyIiwiZWFjaCIsInZhbCIsImxlbmd0aCIsInVuZGVmaW5lZCIsInNpYmxpbmdzIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsIm9uIiwiaGVhZGVyIiwiaGVhZGVyX3Njcm9sbCIsIndpbmRvdyIsInNjcm9sbCIsImN1cnJlbnRUb3AiLCJzY3JvbGxUb3AiLCJiZWZvcmVUb3AiLCJzbGlkZURvd24iLCJzbGlkZVVwIiwiYWN0aXZlTWVudSIsImhlYWRlcl9kcm9wZG93biIsImNsaWNrIiwic2xpZGVUb2dnbGUiLCJmYWRlT3V0IiwiZG9jdW1lbnQiLCJrZXl1cCIsImUiLCJrZXlDb2RlIiwiaGlkZSIsImluaXQiLCJkcm9wZG93bk1lbnUiLCJzbGlkZU1lbnUiLCJzY3JvbGxUb1RvcCIsImFjb3JkZW9uIiwibGxhbWFkYUFqYXgiLCJwZWdhbWVudG8iLCJoZWFkZXJGaXhlZCIsImVsZW1lbnQiLCJUb3AiLCJzZWd1aW1pZW50byIsImVsZW1lbnRfbGlzdGEiLCJpZCIsImVubGFjZSIsImNoaWxkcmVuIiwiaGFzaCIsInNjcm9sbFNweSIsImVsZW1uZXQiLCJleGl0IiwiZXZlbnQiLCJzbGlkZW91dE1lbnUiLCJ0b2dnbGVDbGFzcyIsImNzcyIsInBhZGRpbmctbGVmdCIsInRyYW5zaXRpb24iLCJkZXRhY2giLCJhbmltYXRlIiwiYWNvcmRlb25IaWpvIiwicGFyZW50IiwiZmluZCIsInVybCIsImRhdGEiLCJhamF4IiwiYXN5bmMiLCJkYXRhVHlwZSIsInN1Y2Nlc3MiLCJhIiwiaHRtbCIsImVycm9yIiwicmVhZHkiLCJmbiIsInBsdWdpbk5hbWUiLCJtZXRob2QiLCJkZWZhdWx0cyIsImZvbyIsInNldHRpbmdzIiwibWV0aG9kcyIsIm9wdGlvbnMiLCJleHRlbmQiLCJmb29fcHVibGljX21ldGhvZCIsImFwcGx5IiwiQXJyYXkiLCJwcm90b3R5cGUiLCJzbGljZSIsImNhbGwiLCJhcmd1bWVudHMiLCJqUXVlcnkiLCJmaW5kRWxlbWVudHMiLCJ0b3AiLCJyaWdodCIsImJvdHRvbSIsImxlZnQiLCJoaXRzIiwiZWxlbWVudHMiLCJpIiwiZWxUb3AiLCJvZmZzZXQiLCJlbExlZnQiLCJlbFJpZ2h0Iiwid2lkdGgiLCJlbEJvdHRvbSIsImhlaWdodCIsImlzSW50ZXJzZWN0IiwicHVzaCIsIm9uU2Nyb2xsIiwidGlja3MiLCJqV2luZG93Iiwic2Nyb2xsTGVmdCIsImludGVyc2VjdGlvbnMiLCJsYXN0VGljayIsInRyaWdnZXJIYW5kbGVyIiwiZWxlbWVudHNJblZpZXciLCJvbldpblNpemUiLCJ0cmlnZ2VyIiwidGhyb3R0bGUiLCJmdW5jIiwid2FpdCIsImNvbnRleHQiLCJhcmdzIiwicmVzdWx0IiwidGltZW91dCIsInByZXZpb3VzIiwibGF0ZXIiLCJsZWFkaW5nIiwiZ2V0VGltZSIsIm5vdyIsInJlbWFpbmluZyIsImNsZWFyVGltZW91dCIsInRyYWlsaW5nIiwic2V0VGltZW91dCIsImlzU3B5aW5nIiwiRGF0ZSIsInNlbGVjdG9yIiwib2Zmc2V0VG9wIiwib2Zmc2V0UmlnaHQiLCJvZmZzZXRCb3R0b20iLCJvZmZzZXRMZWZ0IiwidGhyb3R0bGVkU2Nyb2xsIiwicmVhZHlTY3JvbGwiLCJ3aW5TaXplU3B5Il0sIm1hcHBpbmdzIjoiQUFBQUEsV0FBQSxXQUVBLEdBQUFDLEdBQUFDLEVBQUEsc0JBQ0FDLEVBQUFELEVBQUFFLE1BQUFDLEtBQUEsY0FHQUosR0FBQUssS0FBQSxXQUNBLEdBQ0FILElBREFELEVBQUEsc0JBQ0FBLEVBQUFFLE1BQUFDLEtBQUEsZUFFQUgsR0FBQUUsTUFBQUcsTUFBQUMsT0FBQSxHQUFBQyxTQUFBTixFQUNBRCxFQUFBRSxNQUFBTSxTQUFBLGdCQUFBQyxTQUFBLGtCQUVBVCxF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VUFBQS9DLEVBQUFFLE1BQUE0RSxLQUdBUyIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZvcm1fZm9jdXMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgaW5wdXQgPSAkKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpLFxuICAgICAgICBwbGFjZWhvbGRlciA9ICQodGhpcykuYXR0cigncGxhY2Vob2xkZXInKTtcblxuICAgIC8vZW50cmEgZW4gY2FkYSBpbnB1dCB5IGNvbXBydWViYSBzaSB0aWVuZSBhbGd1biB2YWxvciBvIGVsIHBsYWNlaG9sZGVyXG4gICAgaW5wdXQuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGlucHV0ID0gJCgnaW5wdXRbdHlwZT1cInRleHRcIl0nKSxcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyID0gJCh0aGlzKS5hdHRyKCdwbGFjZWhvbGRlcicpO1xuXG4gICAgICAgIGlmICgkKHRoaXMpLnZhbCgpLmxlbmd0aCA+IDAgfHwgcGxhY2Vob2xkZXIgIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5sYWJlbC1sYWJlbCcpLmFkZENsYXNzKCdmbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5sYWJlbC1sYWJlbCcpLnJlbW92ZUNsYXNzKCdmbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBpbnB1dC5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJCh0aGlzKS52YWwoKS5sZW5ndGggIT09IDAgfHwgcGxhY2Vob2xkZXIgIT09ICB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5sYWJlbC1sYWJlbCcpLmFkZENsYXNzKCdmbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5sYWJlbC1sYWJlbCcpLnJlbW92ZUNsYXNzKCdmbG9hdGluZy1sYWJlbCcpO1xuXG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vY3VhbmRvIGVsIGlucHV0IHRpZW5lIGVsIGZvY29cbiAgICBpbnB1dC5vbignZm9jdXNpbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCQodGhpcykudmFsKCkubGVuZ3RoID49IDAgfHwgcGxhY2Vob2xkZXIgIT09ICB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5sYWJlbC1sYWJlbCcpLmFkZENsYXNzKCdmbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5sYWJlbC1sYWJlbCcpLnJlbW92ZUNsYXNzKCdmbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICB9XG4gICAgICAgIC8vJCh0aGlzKS5zaWJsaW5ncygnLmxhYmVsLWxhYmVsJykuYWRkQ2xhc3MoJ2Zsb2F0aW5nLWxhYmVsJyk7XG4gICAgfSk7XG5cbiAgICBpbnB1dC5vbignZm9jdXNvdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkKHRoaXMpLnZhbCgpLmxlbmd0aCAhPT0gMCApIHtcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5sYWJlbC1sYWJlbCcpLmFkZENsYXNzKCdmbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICB9ZWxzZSBpZiAoJCh0aGlzKS5hdHRyKCdwbGFjZWhvbGRlcicpICE9PSAgdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcubGFiZWwtbGFiZWwnKS5hZGRDbGFzcygnZmxvYXRpbmctbGFiZWwnKTtcbiAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmxhYmVsLWxhYmVsJykucmVtb3ZlQ2xhc3MoJ2Zsb2F0aW5nLWxhYmVsJyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuXG59XG5cbmZvcm1fZm9jdXMoKTtcbiIsImhlYWRlciA9IGZ1bmN0aW9uICgpIHtcblxuICAgIGhlYWRlcl9zY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGJlZm9yZVRvcCA9IDAsXG4gICAgICAgICAgICAgICAgY3VycmVudFRvcCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcblxuICAgICAgICAgICAgaWYgKGN1cnJlbnRUb3AgPCB0aGlzLmJlZm9yZVRvcCkge1xuICAgICAgICAgICAgICAgICQoXCJoZWFkZXJcIikuc2xpZGVEb3duKDMwMCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoXCJoZWFkZXJcIikuc2xpZGVVcCgzMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5iZWZvcmVUb3AgPSBjdXJyZW50VG9wO1xuICAgICAgICB9KVxuICAgIH0sXG5cbiAgICBhY3RpdmVNZW51ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCdoZWFkZXIgbGknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKCdoZWFkZXIgbGknKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuXG4gICAgaGVhZGVyX2Ryb3Bkb3duID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICQoJ2hlYWRlciBhJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmRyb3Bkb3duTWVudScpLnNsaWRlVG9nZ2xlKDMwMCk7XG4gICAgICAgIH0pLm9uKCdmb2N1c291dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5kcm9wZG93bk1lbnUnKS5mYWRlT3V0KDMwMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoZG9jdW1lbnQpLmtleXVwKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZihlLmtleUNvZGUgPT09IDI3KXtcbiAgICAgICAgICAgICAgICAkKCcuZW5sYWNlcyBhJykuc2libGluZ3MoJy5kcm9wZG93bk1lbnUnKS5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhlYWRlcl9zY3JvbGwoKTtcbiAgICBoZWFkZXJfZHJvcGRvd24oKTtcbiAgICBhY3RpdmVNZW51KCk7XG59XG5cbmhlYWRlcigpO1xuIiwiaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAvL2hlYWRlckZpeGVkKCcjaGVhZGVyJyk7XG4gICAgZHJvcGRvd25NZW51KCcuaGVhZGVyX19uYXZfX21lbnVIZWFkZXJfX2xpc3RJdGVtX19lbmxhY2UnKTtcbiAgICBzbGlkZU1lbnUoJyNidG4tbWVudScpO1xuICAgIHNjcm9sbFRvVG9wKCcuc2Nyb2xsVG9wJyk7XG4gICAgYWN0aXZlTWVudSgnLmhlYWRlcl9fbmF2X19tZW51SGVhZGVyX19saXN0SXRlbScpO1xuICAgIGFjb3JkZW9uKCcuYWNvcmRlb24tdGl0bGUnLCAnLmFjb3JkZW9uLXBhcmFncmFwaCcpO1xuICAgIGxsYW1hZGFBamF4KCcubGktaXRlbScpO1xuICAgIHBlZ2FtZW50bygnLmNvbnRlbnRmaXhlZCcpO1xufSxcblxuaGVhZGVyRml4ZWQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIHZhciBoZWFkZXIgPSAnaGVhZGVyX2ZpeGVkJztcblxuICAgICQod2luZG93KS5vbignc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZigkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPiAzMCl7XG4gICAgICAgICAgICAkKGVsZW1lbnQpLmFkZENsYXNzKGhlYWRlcik7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgJChlbGVtZW50KS5yZW1vdmVDbGFzcyhoZWFkZXIpO1xuICAgICAgICB9XG4gICAgfSk7XG59LFxuXG5wZWdhbWVudG8gPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgVG9wID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuXG4gICAgICAgIGlmIChUb3AgPiAzMCkge1xuICAgICAgICAgICAgJChlbGVtZW50KS5hZGRDbGFzcygnZml4ZWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoZWxlbWVudCkucmVtb3ZlQ2xhc3MoJ2ZpeGVkJyk7XG4gICAgICAgIH1cbiAgICB9KVxufSxcblxuc2VndWltaWVudG8gPSBmdW5jdGlvbiAoZWxlbWVudCwgZWxlbWVudF9saXN0YSkge1xuICAgICQoZWxlbWVudCkub24oJ3Njcm9sbFNweTplbnRlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaWQgPSAnIycgKyAkKHRoaXMpLmF0dHIoJ2lkJyk7XG5cbiAgICAgICAgJChlbGVtZW50X2xpc3RhKS5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgZW5sYWNlID0gJCh0aGlzKS5jaGlsZHJlbignYScpLFxuICAgICAgICAgICAgICAgIGhhc2ggPSBlbmxhY2UuYXR0cignaHJlZicpO1xuICAgICAgICAgICAgaWYgKGlkID09IGhhc2gpIHtcbiAgICAgICAgICAgICAgICAkKGVsZW1lbnRfbGlzdGEpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KTtcblxuICAgICQoZWxlbWVudCkub24oJ3Njcm9sbFNweTpleGl0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpZCA9ICcjJyArICQodGhpcykuYXR0cignaWQnKTtcblxuICAgICAgICAkKGVsZW1lbnRfbGlzdGEpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBlbmxhY2UgPSAkKHRoaXMpLmNoaWxkcmVuKCdhJyksXG4gICAgICAgICAgICAgICAgaGFzaCA9IGVubGFjZS5hdHRyKCdocmVmJyk7XG4gICAgICAgICAgICBpZiAoaWQgPT0gaGFzaCkge1xuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pO1xuXG4gICAgJChlbGVtZW50KS5zY3JvbGxTcHkoKTtcbn0sXG5cbmRyb3Bkb3duTWVudSA9IGZ1bmN0aW9uIChlbGVtbmV0KSB7XG4gICAgdmFyIGtleWRvd24gPSAkKCcuaGVhZGVyX19uYXZfX21lbnVIZWFkZXJfX2xpc3RJdGVtX19lbmxhY2UnKTtcblxuICAgICQoZWxlbW5ldCkuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuZHJvcGRvd25NZW51Jykuc2xpZGVUb2dnbGUoMzAwKTtcbiAgICB9KS5vbignZm9jdXNvdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykuc2libGluZ3MoJy5kcm9wZG93bk1lbnUnKS5mYWRlT3V0KDMwMCk7XG4gICAgfSk7XG5cbiAgICAvLyAkKGRvY3VtZW50KS5rZXlkb3duKGZ1bmN0aW9uIChlKSB7XG4gICAgLy8gICAgIGlmKGUua2V5Q29kZSA9PT0gMjcpe1xuICAgIC8vICAgICAgICAgJChrZXlkb3duKS5zaWJsaW5ncygnLmRyb3Bkb3duTWVudScpLmhpZGUoKTtcbiAgICAvLyAgICAgfVxuICAgIC8vIH0pO1xufSxcblxuc2xpZGVNZW51ID0gZnVuY3Rpb24gKHNsaWRlTWVudSwgZXhpdCkge1xuICAgIC8vYWJyaXIgbWVudSBpenF1aWVyZGEgaWNvbm8gbWVudVxuICAgICQoc2xpZGVNZW51KS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCl7XG4gICAgXHR2YXIgc2xpZGVvdXRNZW51ID0gJCgnLmVubGFjZXMnKSxcbiAgICAgICAgICAgIGJvZHkgPSAkKCdib2R5Jyk7XG5cbiAgICBcdHNsaWRlb3V0TWVudS50b2dnbGVDbGFzcyhcIm9wZW5cIik7XG5cbiAgICAgICAgLy9ib2R5LmFwcGVuZCgnPGRpdiBjbGFzcz1cIm92ZXJsYXlcIj48L2Rpdj4nKS5jc3MoeydwYWRkaW5nLWxlZnQnOiAnMTMwcHgnLCAndHJhbnNpdGlvbic6ICdhbGwgMC4zcyd9KTtcbiAgICB9KTtcblxuICAgIC8vY2VycmFyIG1lbnUgZW4gbGEgeFxuICAgICQoZXhpdCkub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2xpZGVvdXRNZW51ID0gJCgnI2J0bi1tZW51Jyk7XG5cbiAgICBcdHNsaWRlb3V0TWVudS5yZW1vdmVDbGFzcyhcIm9wZW5cIik7XG4gICAgICAgICQoJ2JvZHknKS5jc3MoeydwYWRkaW5nLWxlZnQnOiAnMCcsICd0cmFuc2l0aW9uJzogJ2FsbCAwLjNzJ30pO1xuXG4gICAgICAgICQoJzxkaXYgY2xhc3M9XCJvdmVybGF5XCI+PC9kaXY+JykuZGV0YWNoKCk7XG5cbiAgICB9KTtcbn0sXG5cbnNjcm9sbFRvVG9wID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAkKHdpbmRvdykub24oJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYoJCh3aW5kb3cpLnNjcm9sbFRvcCgpID4gODAgKXtcbiAgICAgICAgICAgICQoZWxlbWVudCkuc2xpZGVEb3duKCk7XG4gICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICQoZWxlbWVudCkuc2xpZGVVcCgpO1xuICAgICAgICB9XG4gICAgfSksXG5cbiAgICAkKGVsZW1lbnQpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnYm9keScpLmFuaW1hdGUoe1xuICAgICAgICAgICAgc2Nyb2xsVG9wOiAwXG4gICAgICAgIH0sIDQwMCk7XG4gICAgfSk7XG59LFxuXG5hY3RpdmVNZW51ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAkKGVsZW1lbnQpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChlbGVtZW50KS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0pO1xufSxcblxuYWNvcmRlb24gPSBmdW5jdGlvbiAoYWNvcmRlb24sIGFjb3JkZW9uSGlqbyApIHtcbiAgICAkKGFjb3JkZW9uKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykuc2libGluZ3MoYWNvcmRlb25IaWpvKS5zbGlkZVRvZ2dsZSgxMDApO1xuICAgICAgICAvL2NpZXJyYSBlbCBhY29yZGVvbiBhYmllcnRvXG4gICAgICAgICQodGhpcykucGFyZW50KCkuc2libGluZ3MoKS5maW5kKGFjb3JkZW9uSGlqbykuc2xpZGVVcCgpO1xuXG4gICAgICAgIC8vY2FtYmlvIGRlIGljb25vXG4gICAgICAgICQodGhpcykuY2hpbGRyZW4oKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1kb3duIGZhLWNoZXZyb24tdXAnKTtcbiAgICAgICAgLy9jYW1iaW8gZGUgaWNvbm8gY3VhbmRvIGNpZXJyYSBhY29yZGVyb24gYWJpZXJ0b1xuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCkuZmluZCgnaScpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLXVwJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tZG93bicpO1xuICAgIH0pO1xufSxcblxuXG4vL0xsYW1hZGEgYWpheCBwYXJhIGxhIGd1aWEgZGUgZXN0aWxvXG5sbGFtYWRhQWpheCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgJChlbGVtZW50KS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcbiAgICAgICAgdmFyIHVybCA9ICQodGhpcykuZGF0YShcImhyZWZcIik7XG5cbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogdXJsICsgJy5odG1sJyxcbiAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdodG1sJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGEpe1xuICAgICAgICAgICAgICAgICQoJy5jb250ZW50X2NvbnRhaW5lcicpLmh0bWwoYSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGEpe1xuICAgICAgICAgICAgICAgICQoJy5jb250ZW50X2NvbnRhaW5lcicpLmh0bWwoJzxoND5MbyBzZW50aW1vcywgc2UgcHJvZHVqbyB1biBlcnJvcjwvaDQ+Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG59LFxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICBpbml0KCk7XG4gIFxufSk7XG4iLCIvLyByZW1lbWJlciB0byBjaGFuZ2UgZXZlcnkgaW5zdGFuY2Ugb2YgXCJwbHVnaW5OYW1lXCJcbi8vIHRvIHRoZSBuYW1lIG9mIHlvdXIgcGx1Z2luIVxuOyhmdW5jdGlvbigkKSB7XG4gXG4gICAgLy8gaGVyZSBpdCBnb2VzIVxuICAgICQuZm4ucGx1Z2luTmFtZSA9IGZ1bmN0aW9uKG1ldGhvZCkge1xuIFxuICAgICAgICAvLyBwbHVnaW4ncyBkZWZhdWx0IG9wdGlvbnNcbiAgICAgICAgdmFyIGRlZmF1bHRzID0ge1xuIFxuICAgICAgICAgICAgZm9vOiAnYmFyJ1xuIFxuICAgICAgICB9XG4gXG4gICAgICAgIC8vIHRoaXMgd2lsbCBob2xkIHRoZSBtZXJnZWQgZGVmYXVsdCBhbmQgdXNlci1wcm92aWRlZCBwcm9wZXJ0aWVzXG4gICAgICAgIC8vIHlvdSB3aWxsIGhhdmUgdG8gYWNjZXNzIHRoZSBwbHVnaW4ncyBwcm9wZXJ0aWVzIHRocm91Z2ggdGhpcyBvYmplY3QhXG4gICAgICAgIC8vIHNldHRpbmdzLnByb3BlcnR5TmFtZVxuICAgICAgICB2YXIgc2V0dGluZ3MgPSB7fVxuIFxuICAgICAgICAvLyBwdWJsaWMgbWV0aG9kc1xuICAgICAgICAvLyB0byBrZWVwIHRoZSAkLmZuIG5hbWVzcGFjZSB1bmNsdXR0ZXJlZCwgY29sbGVjdCBhbGxcbiAgICAgICAgLy8gb2YgdGhlIHBsdWdpbidzIG1ldGhvZHMgaW4gYW4gb2JqZWN0IGxpdGVyYWwgYW5kIGNhbGxcbiAgICAgICAgLy8gdGhlbSBieSBwYXNzaW5nIHRoZSBzdHJpbmcgbmFtZSBvZiB0aGUgbWV0aG9kIHRvIHRoZSBwbHVnaW5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gcHVibGljIG1ldGhvZHMgY2FuIGJlIGNhbGxlZCBhc1xuICAgICAgICAvLyAkKHNlbGVjdG9yKS5wbHVnaW5OYW1lKCdtZXRob2ROYW1lJywgYXJnMSwgYXJnMiwgLi4uIGFyZ24pXG4gICAgICAgIC8vIHdoZXJlIFwicGx1Z2luTmFtZVwiIGlzIHRoZSBuYW1lIG9mIHlvdXIgcGx1Z2luIGFuZCBcIm1ldGhvZE5hbWVcIlxuICAgICAgICAvL2lzIHRoZSBuYW1lIG9mIGEgZnVuY3Rpb24gYXZhaWxhYmxlIGluXG4gICAgICAgIC8vIHRoZSBcIm1ldGhvZHNcIiBvYmplY3QgYmVsb3c7XG4gICAgICAgIC8vIGFyZzEgLi4uIGFyZ24gYXJlIGFyZ3VtZW50cyB0byBiZSBwYXNzZWQgdG8gdGhlIG1ldGhvZFxuICAgICAgICAvL1xuICAgICAgICAvLyBvciwgZnJvbSB3aXRoaW4gdGhlIHBsdWdpbiBpdHNlbGYsIGFzXG4gICAgICAgIC8vIG1ldGhvZHMubWV0aG9kTmFtZShhcmcxLCBhcmcyLCAuLi4gYXJnbilcbiAgICAgICAgLy8gd2hlcmUgXCJtZXRob2ROYW1lXCIgaXMgdGhlIG5hbWUgb2YgYSBmdW5jdGlvbiBhdmFpbGFibGVcbiAgICAgICAgLy8gaW4gdGhlIFwibWV0aG9kc1wiIG9iamVjdCBiZWxvd1xuICAgICAgICB2YXIgbWV0aG9kcyA9IHtcbiBcbiAgICAgICAgICAgIC8vIHRoaXMgdGhlIGNvbnN0cnVjdG9yIG1ldGhvZCB0aGF0IGdldHMgY2FsbGVkIHdoZW5cbiAgICAgICAgICAgIC8vIHRoZSBvYmplY3QgaXMgY3JlYXRlZFxuICAgICAgICAgICAgaW5pdCA6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiBcbiAgICAgICAgICAgICAgICAvLyBpdGVyYXRlIHRocm91Z2ggYWxsIHRoZSBET00gZWxlbWVudHMgd2UgYXJlXG4gICAgICAgICAgICAgICAgLy8gYXR0YWNoaW5nIHRoZSBwbHVnaW4gdG9cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuIFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcGx1Z2luJ3MgZmluYWwgcHJvcGVydGllcyBhcmUgdGhlIG1lcmdlZCBkZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgIC8vIGFuZCB1c2VyLXByb3ZpZGVkIHByb3BlcnRpZXMgKGlmIGFueSlcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBoYXMgdGhlIGFkdmFudGFnZSBvZiBub3QgcG9sbHV0aW5nIHRoZSBkZWZhdWx0cyxcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFraW5nIHRoZSBzYW1lIGluc3RhY2UgcmUtdXNhYmxlIHdpdGhcbiAgICAgICAgICAgICAgICAgICAgLy8gbmV3IG9wdGlvbnM7IHRoYW5rcyB0byBTdGV2ZW4gQmxhY2sgZm9yIHN1Z2dlc3RpbmcgdGhpc1xuICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncyA9ICQuZXh0ZW5kKHt9LCBkZWZhdWx0cywgb3B0aW9ucylcbiBcbiAgICAgICAgICAgICAgICAgICAgLy8gXCJlbGVtZW50XCIgaG9sZHMgdGhlIGpRdWVyeSBvYmplY3Qgb2YgdGhlIGN1cnJlbnQgRE9NIGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSAkKHRoaXMpO1xuIFxuICAgICAgICAgICAgICAgICAgICAvLyBjb2RlIGdvZXMgaGVyZVxuIFxuICAgICAgICAgICAgICAgIH0pO1xuIFxuICAgICAgICAgICAgfSxcbiBcbiAgICAgICAgICAgIC8vIGEgcHVibGljIG1ldGhvZC4gZm9yIGRlbW9uc3RyYXRpb24gcHVycG9zZXMgb25seSAtIHJlbW92ZSBpdCFcbiAgICAgICAgICAgIGZvb19wdWJsaWNfbWV0aG9kOiBmdW5jdGlvbigpIHtcbiBcbiAgICAgICAgICAgICAgICAvLyBjb2RlIGdvZXMgaGVyZVxuIFxuICAgICAgICAgICAgfVxuIFxuICAgICAgICB9XG4gXG4gICAgICAgIC8vIHByaXZhdGUgbWV0aG9kc1xuICAgICAgICAvLyB0aGVzZSBtZXRob2RzIGNhbiBiZSBjYWxsZWQgb25seSBmcm9tIHdpdGhpbiB0aGUgcGx1Z2luXG4gICAgICAgIC8vXG4gICAgICAgIC8vIHByaXZhdGUgbWV0aG9kcyBjYW4gYmUgY2FsbGVkIGFzXG4gICAgICAgIC8vIGhlbHBlcnMubWV0aG9kTmFtZShhcmcxLCBhcmcyLCAuLi4gYXJnbilcbiAgICAgICAgLy8gd2hlcmUgXCJtZXRob2ROYW1lXCIgaXMgdGhlIG5hbWUgb2YgYSBmdW5jdGlvbiBhdmFpbGFibGUgaW5cbiAgICAgICAgLy8gdGhlIFwiaGVscGVyc1wiIG9iamVjdCBiZWxvdzsgYXJnMSAuLi4gYXJnbiBhcmUgYXJndW1lbnRzIHRvXG4gICAgICAgIC8vIGJlIHBhc3NlZCB0byB0aGUgbWV0aG9kXG4gICAgICAgIHZhciBoZWxwZXJzID0ge1xuIFxuICAgICAgICAgICAgLy8gYSBwcml2YXRlIG1ldGhvZC4gZm9yIGRlbW9uc3RyYXRpb24gcHVycG9zZXMgb25seSAtIHJlbW92ZSBpdCFcbiAgICAgICAgICAgIGZvb19wcml2YXRlX21ldGhvZDogZnVuY3Rpb24oKSB7XG4gXG4gICAgICAgICAgICAgICAgLy8gY29kZSBnb2VzIGhlcmVcbiBcbiAgICAgICAgICAgIH1cbiBcbiAgICAgICAgfVxuIFxuICAgICAgICAvLyBpZiBhIG1ldGhvZCBhcyB0aGUgZ2l2ZW4gYXJndW1lbnQgZXhpc3RzXG4gICAgICAgIGlmIChtZXRob2RzW21ldGhvZF0pIHtcbiBcbiAgICAgICAgICAgIC8vIGNhbGwgdGhlIHJlc3BlY3RpdmUgbWV0aG9kXG4gICAgICAgICAgICByZXR1cm4gbWV0aG9kc1ttZXRob2RdLmFwcGx5KHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuIFxuICAgICAgICAvLyBpZiBhbiBvYmplY3QgaXMgZ2l2ZW4gYXMgbWV0aG9kIE9SIG5vdGhpbmcgaXMgZ2l2ZW4gYXMgYXJndW1lbnRcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbWV0aG9kID09PSAnb2JqZWN0JyB8fCAhbWV0aG9kKSB7XG4gXG4gICAgICAgICAgICAvLyBjYWxsIHRoZSBpbml0aWFsaXphdGlvbiBtZXRob2RcbiAgICAgICAgICAgIHJldHVybiBtZXRob2RzLmluaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiBcbiAgICAgICAgLy8gb3RoZXJ3aXNlXG4gICAgICAgIH0gZWxzZSB7XG4gXG4gICAgICAgICAgICAvLyB0cmlnZ2VyIGFuIGVycm9yXG4gICAgICAgICAgICAkLmVycm9yKCAnTWV0aG9kIFwiJyArICBtZXRob2QgKyAnXCIgZG9lcyBub3QgZXhpc3QgaW4gcGx1Z2luTmFtZSBwbHVnaW4hJyk7XG4gXG4gICAgICAgIH1cbiBcbiAgICB9XG4gXG59KShqUXVlcnkpOyIsIi8vIHJlbWVtYmVyIHRvIGNoYW5nZSBldmVyeSBpbnN0YW5jZSBvZiBcInBsdWdpbk5hbWVcIlxuLy8gdG8gdGhlIG5hbWUgb2YgeW91ciBwbHVnaW4hXG47KGZ1bmN0aW9uKCQpIHtcblxuXHR2YXIgaldpbmRvdyA9ICQod2luZG93KTtcblx0dmFyIGVsZW1lbnRzID0gW107XG5cdHZhciBlbGVtZW50c0luVmlldyA9IFtdO1xuXHR2YXIgaXNTcHlpbmcgPSBmYWxzZTtcblx0dmFyIHRpY2tzID0gMDtcblx0dmFyIG9mZnNldCA9IHtcblx0XHR0b3AgOiAwLFxuXHRcdHJpZ2h0IDogMCxcblx0XHRib3R0b20gOiAwLFxuXHRcdGxlZnQgOiAwLFxuXHR9XG5cblx0LyoqXG5cdCAqIEZpbmQgZWxlbWVudHMgdGhhdCBhcmUgd2l0aGluIHRoZSBib3VuZGFyeVxuXHQgKiBAcGFyYW0ge251bWJlcn0gdG9wXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSByaWdodFxuXHQgKiBAcGFyYW0ge251bWJlcn0gYm90dG9tXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBsZWZ0XG5cdCAqIEByZXR1cm4ge2pRdWVyeX1cdFx0QSBjb2xsZWN0aW9uIG9mIGVsZW1lbnRzXG5cdCAqL1xuXHRmdW5jdGlvbiBmaW5kRWxlbWVudHModG9wLCByaWdodCwgYm90dG9tLCBsZWZ0KSB7XG5cdFx0dmFyIGhpdHMgPSAkKCk7XG5cdFx0JC5lYWNoKGVsZW1lbnRzLCBmdW5jdGlvbihpLCBlbGVtZW50KSB7XG5cdFx0XHR2YXIgZWxUb3AgPSBlbGVtZW50Lm9mZnNldCgpLnRvcCxcblx0XHRcdFx0ZWxMZWZ0ID0gZWxlbWVudC5vZmZzZXQoKS5sZWZ0LFxuXHRcdFx0XHRlbFJpZ2h0ID0gZWxMZWZ0ICsgZWxlbWVudC53aWR0aCgpLFxuXHRcdFx0XHRlbEJvdHRvbSA9IGVsVG9wICsgZWxlbWVudC5oZWlnaHQoKTtcblxuXHRcdFx0dmFyIGlzSW50ZXJzZWN0ID0gIShlbExlZnQgPiByaWdodCB8fFxuXHRcdFx0XHRlbFJpZ2h0IDwgbGVmdCB8fFxuXHRcdFx0XHRlbFRvcCA+IGJvdHRvbSB8fFxuXHRcdFx0XHRlbEJvdHRvbSA8IHRvcCk7XG5cblx0XHRcdGlmIChpc0ludGVyc2VjdCkge1xuXHRcdFx0XHRoaXRzLnB1c2goZWxlbWVudCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gaGl0cztcblx0fVxuXG5cdC8qKlxuXHQgKiBDYWxsZWQgd2hlbiB0aGUgdXNlciBzY3JvbGxzIHRoZSB3aW5kb3dcblx0ICovXG5cdGZ1bmN0aW9uIG9uU2Nyb2xsKCkge1xuXHRcdC8vIHVuaXF1ZSB0aWNrIGlkXG5cdFx0Kyt0aWNrcztcblxuXHRcdC8vIHZpZXdwb3J0IHJlY3RhbmdsZVxuXHRcdHZhciB0b3AgPSBqV2luZG93LnNjcm9sbFRvcCgpLFxuXHRcdFx0bGVmdCA9IGpXaW5kb3cuc2Nyb2xsTGVmdCgpLFxuXHRcdFx0cmlnaHQgPSBsZWZ0ICsgaldpbmRvdy53aWR0aCgpLFxuXHRcdFx0Ym90dG9tID0gdG9wICsgaldpbmRvdy5oZWlnaHQoKTtcblxuXHRcdC8vIGRldGVybWluZSB3aGljaCBlbGVtZW50cyBhcmUgaW4gdmlld1xuXHRcdHZhciBpbnRlcnNlY3Rpb25zID0gZmluZEVsZW1lbnRzKHRvcCtvZmZzZXQudG9wLCByaWdodCtvZmZzZXQucmlnaHQsIGJvdHRvbStvZmZzZXQuYm90dG9tLCBsZWZ0K29mZnNldC5sZWZ0KTtcblx0XHQkLmVhY2goaW50ZXJzZWN0aW9ucywgZnVuY3Rpb24oaSwgZWxlbWVudCkge1xuXHRcdFx0dmFyIGxhc3RUaWNrID0gZWxlbWVudC5kYXRhKCdzY3JvbGxTcHk6dGlja3MnKTtcblx0XHRcdGlmICh0eXBlb2YgbGFzdFRpY2sgIT0gJ251bWJlcicpIHtcblx0XHRcdFx0Ly8gZW50ZXJlZCBpbnRvIHZpZXdcblx0XHRcdFx0ZWxlbWVudC50cmlnZ2VySGFuZGxlcignc2Nyb2xsU3B5OmVudGVyJyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIHVwZGF0ZSB0aWNrIGlkXG5cdFx0XHRlbGVtZW50LmRhdGEoJ3Njcm9sbFNweTp0aWNrcycsIHRpY2tzKTtcblx0XHR9KTtcblxuXHRcdC8vIGRldGVybWluZSB3aGljaCBlbGVtZW50cyBhcmUgbm8gbG9uZ2VyIGluIHZpZXdcblx0XHQkLmVhY2goZWxlbWVudHNJblZpZXcsIGZ1bmN0aW9uKGksIGVsZW1lbnQpIHtcblx0XHRcdHZhciBsYXN0VGljayA9IGVsZW1lbnQuZGF0YSgnc2Nyb2xsU3B5OnRpY2tzJyk7XG5cdFx0XHRpZiAodHlwZW9mIGxhc3RUaWNrID09ICdudW1iZXInICYmIGxhc3RUaWNrICE9PSB0aWNrcykge1xuXHRcdFx0XHQvLyBleGl0ZWQgZnJvbSB2aWV3XG5cdFx0XHRcdGVsZW1lbnQudHJpZ2dlckhhbmRsZXIoJ3Njcm9sbFNweTpleGl0Jyk7XG5cdFx0XHRcdGVsZW1lbnQuZGF0YSgnc2Nyb2xsU3B5OnRpY2tzJywgbnVsbCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyByZW1lbWJlciBlbGVtZW50cyBpbiB2aWV3IGZvciBuZXh0IHRpY2tcblx0XHRlbGVtZW50c0luVmlldyA9IGludGVyc2VjdGlvbnM7XG5cdH1cblxuXHQvKipcblx0ICogQ2FsbGVkIHdoZW4gd2luZG93IGlzIHJlc2l6ZWRcblx0Ki9cblx0ZnVuY3Rpb24gb25XaW5TaXplKCkge1xuXHRcdGpXaW5kb3cudHJpZ2dlcignc2Nyb2xsU3B5OndpblNpemUnKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXQgdGltZSBpbiBtc1xuICAgKiBAbGljZW5zZSBodHRwczovL3Jhdy5naXRodWIuY29tL2phc2hrZW5hcy91bmRlcnNjb3JlL21hc3Rlci9MSUNFTlNFXG5cdCAqIEB0eXBlIHtmdW5jdGlvbn1cblx0ICogQHJldHVybiB7bnVtYmVyfVxuXHQgKi9cblx0dmFyIGdldFRpbWUgPSAoRGF0ZS5ub3cgfHwgZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0fSk7XG5cblx0LyoqXG5cdCAqIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgd2hlbiBpbnZva2VkLCB3aWxsIG9ubHkgYmUgdHJpZ2dlcmVkIGF0IG1vc3Qgb25jZVxuXHQgKiBkdXJpbmcgYSBnaXZlbiB3aW5kb3cgb2YgdGltZS4gTm9ybWFsbHksIHRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gd2lsbCBydW5cblx0ICogYXMgbXVjaCBhcyBpdCBjYW4sIHdpdGhvdXQgZXZlciBnb2luZyBtb3JlIHRoYW4gb25jZSBwZXIgYHdhaXRgIGR1cmF0aW9uO1xuXHQgKiBidXQgaWYgeW91J2QgbGlrZSB0byBkaXNhYmxlIHRoZSBleGVjdXRpb24gb24gdGhlIGxlYWRpbmcgZWRnZSwgcGFzc1xuXHQgKiBge2xlYWRpbmc6IGZhbHNlfWAuIFRvIGRpc2FibGUgZXhlY3V0aW9uIG9uIHRoZSB0cmFpbGluZyBlZGdlLCBkaXR0by5cblx0ICogQGxpY2Vuc2UgaHR0cHM6Ly9yYXcuZ2l0aHViLmNvbS9qYXNoa2VuYXMvdW5kZXJzY29yZS9tYXN0ZXIvTElDRU5TRVxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB3YWl0XG5cdCAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259XG5cdCAqL1xuXHRmdW5jdGlvbiB0aHJvdHRsZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG5cdFx0dmFyIGNvbnRleHQsIGFyZ3MsIHJlc3VsdDtcblx0XHR2YXIgdGltZW91dCA9IG51bGw7XG5cdFx0dmFyIHByZXZpb3VzID0gMDtcblx0XHRvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuXHRcdHZhciBsYXRlciA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHByZXZpb3VzID0gb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSA/IDAgOiBnZXRUaW1lKCk7XG5cdFx0XHR0aW1lb3V0ID0gbnVsbDtcblx0XHRcdHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdFx0XHRjb250ZXh0ID0gYXJncyA9IG51bGw7XG5cdFx0fTtcblx0XHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIG5vdyA9IGdldFRpbWUoKTtcblx0XHRcdGlmICghcHJldmlvdXMgJiYgb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSkgcHJldmlvdXMgPSBub3c7XG5cdFx0XHR2YXIgcmVtYWluaW5nID0gd2FpdCAtIChub3cgLSBwcmV2aW91cyk7XG5cdFx0XHRjb250ZXh0ID0gdGhpcztcblx0XHRcdGFyZ3MgPSBhcmd1bWVudHM7XG5cdFx0XHRpZiAocmVtYWluaW5nIDw9IDApIHtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHRcdFx0XHR0aW1lb3V0ID0gbnVsbDtcblx0XHRcdFx0cHJldmlvdXMgPSBub3c7XG5cdFx0XHRcdHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdFx0XHRcdGNvbnRleHQgPSBhcmdzID0gbnVsbDtcblx0XHRcdH0gZWxzZSBpZiAoIXRpbWVvdXQgJiYgb3B0aW9ucy50cmFpbGluZyAhPT0gZmFsc2UpIHtcblx0XHRcdFx0dGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHJlbWFpbmluZyk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH07XG5cdH07XG5cblx0LyoqXG5cdCAqIEVuYWJsZXMgU2Nyb2xsU3B5IHVzaW5nIGEgc2VsZWN0b3Jcblx0ICogQHBhcmFtIHtqUXVlcnl8c3RyaW5nfSBzZWxlY3RvciAgVGhlIGVsZW1lbnRzIGNvbGxlY3Rpb24sIG9yIGEgc2VsZWN0b3Jcblx0ICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXHRPcHRpb25hbC5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aHJvdHRsZSA6IG51bWJlciAtPiBzY3JvbGxzcHkgdGhyb3R0bGluZy4gRGVmYXVsdDogMTAwIG1zXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2Zmc2V0VG9wIDogbnVtYmVyIC0+IG9mZnNldCBmcm9tIHRvcC4gRGVmYXVsdDogMFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9mZnNldFJpZ2h0IDogbnVtYmVyIC0+IG9mZnNldCBmcm9tIHJpZ2h0LiBEZWZhdWx0OiAwXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2Zmc2V0Qm90dG9tIDogbnVtYmVyIC0+IG9mZnNldCBmcm9tIGJvdHRvbS4gRGVmYXVsdDogMFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9mZnNldExlZnQgOiBudW1iZXIgLT4gb2Zmc2V0IGZyb20gbGVmdC4gRGVmYXVsdDogMFxuXHQgKiBAcmV0dXJucyB7alF1ZXJ5fVxuXHQgKi9cblx0JC5zY3JvbGxTcHkgPSBmdW5jdGlvbihzZWxlY3Rvciwgb3B0aW9ucykge1xuXHRcdHNlbGVjdG9yID0gJChzZWxlY3Rvcik7XG5cdFx0c2VsZWN0b3IuZWFjaChmdW5jdGlvbihpLCBlbGVtZW50KSB7XG5cdFx0XHRlbGVtZW50cy5wdXNoKCQoZWxlbWVudCkpO1xuXHRcdH0pO1xuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHtcblx0XHRcdHRocm90dGxlOiAxMDBcblx0XHR9O1xuXG5cdFx0b2Zmc2V0LnRvcCA9IG9wdGlvbnMub2Zmc2V0VG9wIHx8IDA7XG5cdFx0b2Zmc2V0LnJpZ2h0ID0gb3B0aW9ucy5vZmZzZXRSaWdodCB8fCAwO1xuXHRcdG9mZnNldC5ib3R0b20gPSBvcHRpb25zLm9mZnNldEJvdHRvbSB8fCAwO1xuXHRcdG9mZnNldC5sZWZ0ID0gb3B0aW9ucy5vZmZzZXRMZWZ0IHx8IDA7XG5cblx0XHR2YXIgdGhyb3R0bGVkU2Nyb2xsID0gdGhyb3R0bGUob25TY3JvbGwsIG9wdGlvbnMudGhyb3R0bGUgfHwgMTAwKTtcblx0XHR2YXIgcmVhZHlTY3JvbGwgPSBmdW5jdGlvbigpe1xuXHRcdFx0JChkb2N1bWVudCkucmVhZHkodGhyb3R0bGVkU2Nyb2xsKTtcblx0XHR9O1xuXG5cdFx0aWYgKCFpc1NweWluZykge1xuXHRcdFx0aldpbmRvdy5vbignc2Nyb2xsJywgcmVhZHlTY3JvbGwpO1xuXHRcdFx0aldpbmRvdy5vbigncmVzaXplJywgcmVhZHlTY3JvbGwpO1xuXHRcdFx0aXNTcHlpbmcgPSB0cnVlO1xuXHRcdH1cblxuXHRcdC8vIHBlcmZvcm0gYSBzY2FuIG9uY2UsIGFmdGVyIGN1cnJlbnQgZXhlY3V0aW9uIGNvbnRleHQsIGFuZCBhZnRlciBkb20gaXMgcmVhZHlcblx0XHRzZXRUaW1lb3V0KHJlYWR5U2Nyb2xsLCAwKTtcblxuXHRcdHJldHVybiBzZWxlY3Rvcjtcblx0fTtcblxuXHQvKipcblx0ICogTGlzdGVuIGZvciB3aW5kb3cgcmVzaXplIGV2ZW50c1xuXHQgKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcdFx0XHRcdFx0XHRPcHRpb25hbC4gU2V0IHsgdGhyb3R0bGU6IG51bWJlciB9IHRvIGNoYW5nZSB0aHJvdHRsaW5nLiBEZWZhdWx0OiAxMDAgbXNcblx0ICogQHJldHVybnMge2pRdWVyeX1cdFx0JCh3aW5kb3cpXG5cdCAqL1xuXHQkLndpblNpemVTcHkgPSBmdW5jdGlvbihvcHRpb25zKSB7XG5cdFx0JC53aW5TaXplU3B5ID0gZnVuY3Rpb24oKSB7IHJldHVybiBqV2luZG93OyB9OyAvLyBsb2NrIGZyb20gbXVsdGlwbGUgY2FsbHNcblx0XHRvcHRpb25zID0gb3B0aW9ucyB8fCB7XG5cdFx0XHR0aHJvdHRsZTogMTAwXG5cdFx0fTtcblx0XHRyZXR1cm4galdpbmRvdy5vbigncmVzaXplJywgdGhyb3R0bGUob25XaW5TaXplLCBvcHRpb25zLnRocm90dGxlIHx8IDEwMCkpO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBFbmFibGVzIFNjcm9sbFNweSBvbiBhIGNvbGxlY3Rpb24gb2YgZWxlbWVudHNcblx0ICogZS5nLiAkKCcuc2Nyb2xsU3B5Jykuc2Nyb2xsU3B5KClcblx0ICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXHRPcHRpb25hbC5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aHJvdHRsZSA6IG51bWJlciAtPiBzY3JvbGxzcHkgdGhyb3R0bGluZy4gRGVmYXVsdDogMTAwIG1zXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2Zmc2V0VG9wIDogbnVtYmVyIC0+IG9mZnNldCBmcm9tIHRvcC4gRGVmYXVsdDogMFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9mZnNldFJpZ2h0IDogbnVtYmVyIC0+IG9mZnNldCBmcm9tIHJpZ2h0LiBEZWZhdWx0OiAwXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2Zmc2V0Qm90dG9tIDogbnVtYmVyIC0+IG9mZnNldCBmcm9tIGJvdHRvbS4gRGVmYXVsdDogMFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9mZnNldExlZnQgOiBudW1iZXIgLT4gb2Zmc2V0IGZyb20gbGVmdC4gRGVmYXVsdDogMFxuXHQgKiBAcmV0dXJucyB7alF1ZXJ5fVxuXHQgKi9cblx0JC5mbi5zY3JvbGxTcHkgPSBmdW5jdGlvbihvcHRpb25zKSB7XG5cdFx0cmV0dXJuICQuc2Nyb2xsU3B5KCQodGhpcyksIG9wdGlvbnMpO1xuXHR9O1xuXG59KShqUXVlcnkpOyJdfQ==
